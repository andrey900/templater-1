function Templater(t,e){this.template=t.replace(/\n/g,"");this.data=e}Templater.prototype.compile=function(){var t=/{{(.*?)}}/g,e="";var a,l;while(a=t.exec(this.template)){if(!/[#/]/.test(a[1]))this.template=this.template.replace(a[0],s(this.data,a[1]));else{if(l=/{{#(.*?)}}(.*?){{\/\1}}/g.exec(this.template.substr(t.lastIndex-a[0].length))){var i=s(this.data,a[1].substr(1));if(i&&i.forEach)i.forEach(function(t){e+=new Templater(l[2],t).compile()});else e=i?new Templater(l[2],this.data).compile():"";this.template=this.template.replace(l[0],e)}else this.template=this.template.replace(/{/g,"&#123;")}t.lastIndex-=a[0].length}return this.template;function s(t,e){var a;if(/[.]/.test(e)){a=e.split(".");return s(t[a.shift()],a.join("."))}else{a=e.split(" ");var l=a.shift();return typeof t[l]==="function"?t[l].apply(t,a):t[l]}}};